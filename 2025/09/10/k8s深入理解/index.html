<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>k8s深入理解 | Fxp&#39;Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Kubernetes深度学习总结：从概念到实践 基于Raft KV分布式系统项目的Kubernetes学习之路  目录 初识Kubernetes：解决认知困惑 Kubernetes的本质定位 Pod：最小部署单元的深度理解 Kubernetes在操作系统中的实际部署 Pod调度到物理节点的完整机制 Pod创建和管理的黑箱揭秘 应用内部创建Pod的”套娃”现象 Kubernetes运行进程的完整操作">
<meta property="og:type" content="article">
<meta property="og:title" content="k8s深入理解">
<meta property="og:url" content="http://example.com/2025/09/10/k8s%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/index.html">
<meta property="og:site_name" content="Fxp&#39;Blog">
<meta property="og:description" content="Kubernetes深度学习总结：从概念到实践 基于Raft KV分布式系统项目的Kubernetes学习之路  目录 初识Kubernetes：解决认知困惑 Kubernetes的本质定位 Pod：最小部署单元的深度理解 Kubernetes在操作系统中的实际部署 Pod调度到物理节点的完整机制 Pod创建和管理的黑箱揭秘 应用内部创建Pod的”套娃”现象 Kubernetes运行进程的完整操作">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-09-10T15:37:43.000Z">
<meta property="article:modified_time" content="2025-09-10T15:38:53.768Z">
<meta property="article:author" content="Fxp">
<meta property="article:tag" content="容器编排">
<meta property="article:tag" content="k8s">
<meta property="article:tag" content="docker">
<meta property="article:tag" content="容器组">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Fxp'Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Fxp&#39;Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-k8s深入理解" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/09/10/k8s%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/" class="article-date">
  <time class="dt-published" datetime="2025-09-10T15:37:43.000Z" itemprop="datePublished">2025-09-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      k8s深入理解
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Kubernetes深度学习总结：从概念到实践"><a href="#Kubernetes深度学习总结：从概念到实践" class="headerlink" title="Kubernetes深度学习总结：从概念到实践"></a>Kubernetes深度学习总结：从概念到实践</h1><blockquote>
<p>基于Raft KV分布式系统项目的Kubernetes学习之路</p>
</blockquote>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ol>
<li><a href="#1-%E5%88%9D%E8%AF%86kubernetes%E8%A7%A3%E5%86%B3%E8%AE%A4%E7%9F%A5%E5%9B%B0%E6%83%91">初识Kubernetes：解决认知困惑</a></li>
<li><a href="#2-kubernetes%E7%9A%84%E6%9C%AC%E8%B4%A8%E5%AE%9A%E4%BD%8D">Kubernetes的本质定位</a></li>
<li><a href="#3-pod%E6%9C%80%E5%B0%8F%E9%83%A8%E7%BD%B2%E5%8D%95%E5%85%83%E7%9A%84%E6%B7%B1%E5%BA%A6%E7%90%86%E8%A7%A3">Pod：最小部署单元的深度理解</a></li>
<li><a href="#4-kubernetes%E5%9C%A8%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E5%AE%9E%E9%99%85%E9%83%A8%E7%BD%B2">Kubernetes在操作系统中的实际部署</a></li>
<li><a href="#5-pod%E8%B0%83%E5%BA%A6%E5%88%B0%E7%89%A9%E7%90%86%E8%8A%82%E7%82%B9%E7%9A%84%E5%AE%8C%E6%95%B4%E6%9C%BA%E5%88%B6">Pod调度到物理节点的完整机制</a></li>
<li><a href="#6-pod%E5%88%9B%E5%BB%BA%E5%92%8C%E7%AE%A1%E7%90%86%E7%9A%84%E9%BB%91%E7%AE%B1%E6%8F%AD%E7%A7%98">Pod创建和管理的黑箱揭秘</a></li>
<li><a href="#7-%E5%BA%94%E7%94%A8%E5%86%85%E9%83%A8%E5%88%9B%E5%BB%BApod%E7%9A%84%E5%A5%97%E5%A8%83%E7%8E%B0%E8%B1%A1">应用内部创建Pod的”套娃”现象</a></li>
<li><a href="#8-kubernetes%E8%BF%90%E8%A1%8C%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%AE%8C%E6%95%B4%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97">Kubernetes运行进程的完整操作指南</a></li>
<li><a href="#9-pod%E5%AE%B9%E5%99%A8%E6%95%B0%E9%87%8F%E7%9A%84%E6%8E%A7%E5%88%B6%E6%9C%BA%E5%88%B6">Pod容器数量的控制机制</a></li>
<li><a href="#10-%E5%AE%9E%E8%B7%B5%E6%80%BB%E7%BB%93%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">实践总结与最佳实践</a></li>
</ol>
<hr>
<h2 id="1-初识Kubernetes：解决认知困惑"><a href="#1-初识Kubernetes：解决认知困惑" class="headerlink" title="1. 初识Kubernetes：解决认知困惑"></a>1. 初识Kubernetes：解决认知困惑</h2><h3 id="1-1-问题的起源"><a href="#1-1-问题的起源" class="headerlink" title="1.1 问题的起源"></a>1.1 问题的起源</h3><p>作为一个接触Kubernetes的新手，最大的困惑来自于：</p>
<ul>
<li><strong>侵入性太强</strong>：K8s似乎要改变整个应用的架构</li>
<li><strong>概念抽象</strong>：Pod、Service、Deployment等概念难以理解</li>
<li><strong>黑箱操作</strong>：不知道Pod是如何创建和运行的</li>
</ul>
<h3 id="1-2-认知转变的关键"><a href="#1-2-认知转变的关键" class="headerlink" title="1.2 认知转变的关键"></a>1.2 认知转变的关键</h3><p><strong>核心理解</strong>：Kubernetes不是应用框架，而是基础设施抽象层。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">传统方式: 应用 → 物理机/虚拟机</span><br><span class="line">K8s方式:  应用 → K8s抽象层 → 物理机/虚拟机</span><br></pre></td></tr></table></figure>

<h3 id="1-3-模块化视角下的K8s"><a href="#1-3-模块化视角下的K8s" class="headerlink" title="1.3 模块化视角下的K8s"></a>1.3 模块化视角下的K8s</h3><p>Kubernetes本质上是一个模块化的分布式系统：</p>
<p><strong>控制平面模块</strong>：</p>
<ul>
<li><code>kube-apiserver</code>: API网关</li>
<li><code>etcd</code>: 分布式配置存储</li>
<li><code>kube-scheduler</code>: 资源调度器</li>
<li><code>kube-controller-manager</code>: 状态控制器</li>
</ul>
<p><strong>工作节点模块</strong>：</p>
<ul>
<li><code>kubelet</code>: 节点代理</li>
<li><code>kube-proxy</code>: 网络代理</li>
<li><code>容器运行时</code>: Docker&#x2F;containerd</li>
</ul>
<hr>
<h2 id="2-Kubernetes的本质定位"><a href="#2-Kubernetes的本质定位" class="headerlink" title="2. Kubernetes的本质定位"></a>2. Kubernetes的本质定位</h2><h3 id="2-1-重新定位Kubernetes"><a href="#2-1-重新定位Kubernetes" class="headerlink" title="2.1 重新定位Kubernetes"></a>2.1 重新定位Kubernetes</h3><p><strong>K8s不是什么</strong>：</p>
<ul>
<li>❌ 不是应用开发框架</li>
<li>❌ 不是编程语言</li>
<li>❌ 不是数据库或中间件</li>
</ul>
<p><strong>K8s是什么</strong>：</p>
<ul>
<li>✅ 分布式系统的操作系统</li>
<li>✅ 资源管理和调度平台</li>
<li>✅ 应用生命周期管理工具</li>
</ul>
<h3 id="2-2-抽象层次的理解"><a href="#2-2-抽象层次的理解" class="headerlink" title="2.2 抽象层次的理解"></a>2.2 抽象层次的理解</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">应用层 (你的Raft KV服务)</span><br><span class="line">    ↓</span><br><span class="line">容器层 (Docker容器)</span><br><span class="line">    ↓</span><br><span class="line">K8s编排层 (Pod, Service, Deployment)</span><br><span class="line">    ↓</span><br><span class="line">基础设施层 (物理机/云服务器)</span><br></pre></td></tr></table></figure>

<h3 id="2-3-渐进式理解策略"><a href="#2-3-渐进式理解策略" class="headerlink" title="2.3 渐进式理解策略"></a>2.3 渐进式理解策略</h3><p><strong>第一阶段：容器化（最小侵入）</strong></p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">20.04</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> your-app /app/</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;/app/your-app&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<p><strong>第二阶段：单Pod运行</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">my-app</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">app</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">my-app:latest</span></span><br></pre></td></tr></table></figure>

<p><strong>第三阶段：逐步添加K8s特性</strong></p>
<ul>
<li>需要多副本？添加Deployment</li>
<li>需要服务发现？添加Service</li>
<li>需要配置管理？添加ConfigMap</li>
</ul>
<hr>
<h2 id="3-Pod：最小部署单元的深度理解"><a href="#3-Pod：最小部署单元的深度理解" class="headerlink" title="3. Pod：最小部署单元的深度理解"></a>3. Pod：最小部署单元的深度理解</h2><h3 id="3-1-Pod的准确定义"><a href="#3-1-Pod的准确定义" class="headerlink" title="3.1 Pod的准确定义"></a>3.1 Pod的准确定义</h3><p><strong>重要概念</strong>：Pod不是一个容器，而是一个或多个容器的集合！</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看Pod内的容器</span></span><br><span class="line">kubectl describe pod my-pod</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出示例：</span></span><br><span class="line">Containers:</span><br><span class="line">  main-app:          <span class="comment"># 主应用容器</span></span><br><span class="line">    Image: my-app:v1.0</span><br><span class="line">  sidecar-proxy:     <span class="comment"># 边车容器</span></span><br><span class="line">    Image: nginx:1.20</span><br><span class="line">  log-collector:     <span class="comment"># 日志收集容器</span></span><br><span class="line">    Image: fluentd:v1.14</span><br></pre></td></tr></table></figure>

<h3 id="3-2-Pod在操作系统中的实际形态"><a href="#3-2-Pod在操作系统中的实际形态" class="headerlink" title="3.2 Pod在操作系统中的实际形态"></a>3.2 Pod在操作系统中的实际形态</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">操作系统 (Linux/Windows)</span><br><span class="line">├── Docker/containerd (容器运行时)</span><br><span class="line">│   ├── Pod网络命名空间 (共享网络)</span><br><span class="line">│   │   ├── 容器1: my-app</span><br><span class="line">│   │   ├── 容器2: nginx-proxy  </span><br><span class="line">│   │   └── 容器3: log-collector</span><br><span class="line">│   ├── 共享存储卷</span><br><span class="line">│   └── 共享进程命名空间(可选)</span><br><span class="line">└── kubelet (K8s节点代理)</span><br></pre></td></tr></table></figure>

<h3 id="3-3-“最小部署单元”的准确含义"><a href="#3-3-“最小部署单元”的准确含义" class="headerlink" title="3.3 “最小部署单元”的准确含义"></a>3.3 “最小部署单元”的准确含义</h3><p><strong>关键理解</strong>：</p>
<ul>
<li>✅ Pod是K8s中最小的<strong>可部署</strong>和<strong>可管理</strong>的单元</li>
<li>✅ 你不能直接部署单个容器到K8s，必须通过Pod</li>
<li>✅ K8s的所有操作（调度、扩缩容、重启等）都是以Pod为单位</li>
<li>❌ Pod不是最小的<strong>运行</strong>单元（容器才是）</li>
</ul>
<h3 id="3-4-实际验证Pod的容器组成"><a href="#3-4-实际验证Pod的容器组成" class="headerlink" title="3.4 实际验证Pod的容器组成"></a>3.4 实际验证Pod的容器组成</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在运行的系统上查看</span></span><br><span class="line">docker ps | grep k8s</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出示例（一个Pod对应多个容器）：</span></span><br><span class="line">CONTAINER ID   IMAGE                    NAMES</span><br><span class="line">1a2b3c4d5e6f   my-app:v1.0             k8s_main-app_my-pod_default_uuid</span><br><span class="line">2b3c4d5e6f7g   nginx:1.20              k8s_proxy_my-pod_default_uuid</span><br><span class="line">3c4d5e6f7g8h   pause:3.6               k8s_POD_my-pod_default_uuid</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：<code>pause</code>容器是Pod的基础设施容器，负责维护网络和存储命名空间。</p>
<hr>
<h2 id="4-Kubernetes在操作系统中的实际部署"><a href="#4-Kubernetes在操作系统中的实际部署" class="headerlink" title="4. Kubernetes在操作系统中的实际部署"></a>4. Kubernetes在操作系统中的实际部署</h2><h3 id="4-1-单机部署：All-in-One模式"><a href="#4-1-单机部署：All-in-One模式" class="headerlink" title="4.1 单机部署：All-in-One模式"></a>4.1 单机部署：All-in-One模式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">一台物理机/虚拟机</span><br><span class="line">├── 控制平面组件 (Master Components)</span><br><span class="line">│   ├── kube-apiserver     (端口: 6443)</span><br><span class="line">│   ├── etcd              (端口: 2379, 2380)</span><br><span class="line">│   ├── kube-scheduler    (调度器)</span><br><span class="line">│   └── kube-controller-manager (控制器)</span><br><span class="line">├── 工作节点组件 (Worker Components)</span><br><span class="line">│   ├── kubelet           (节点代理)</span><br><span class="line">│   ├── kube-proxy        (网络代理)</span><br><span class="line">│   └── 容器运行时 (Docker/containerd)</span><br><span class="line">└── 网络插件 (CNI)</span><br><span class="line">    ├── flannel/calico/weave</span><br><span class="line">    └── 虚拟网桥和路由</span><br></pre></td></tr></table></figure>

<h3 id="4-2-实际进程验证"><a href="#4-2-实际进程验证" class="headerlink" title="4.2 实际进程验证"></a>4.2 实际进程验证</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在K8s节点上查看运行的进程</span></span><br><span class="line">ps aux | grep kube</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出示例：</span></span><br><span class="line">root  1234  kube-apiserver --advertise-address=192.168.1.100</span><br><span class="line">root  1235  etcd --data-dir=/var/lib/etcd</span><br><span class="line">root  1236  kube-scheduler --kubeconfig=/etc/kubernetes/scheduler.conf</span><br><span class="line">root  1237  kube-controller-manager --kubeconfig=/etc/kubernetes/controller-manager.conf</span><br><span class="line">root  1238  kubelet --config=/var/lib/kubelet/config.yaml</span><br><span class="line">root  1239  kube-proxy --config=/var/lib/kube-proxy/config.conf</span><br></pre></td></tr></table></figure>

<h3 id="4-3-部署方式详解"><a href="#4-3-部署方式详解" class="headerlink" title="4.3 部署方式详解"></a>4.3 部署方式详解</h3><h4 id="本地开发环境"><a href="#本地开发环境" class="headerlink" title="本地开发环境"></a>本地开发环境</h4><p><strong>Minikube（最简单）</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装并启动</span></span><br><span class="line">minikube start</span><br><span class="line">kubectl cluster-info</span><br></pre></td></tr></table></figure>

<p><strong>Kind（Kubernetes in Docker）</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建集群</span></span><br><span class="line">kind create cluster --name my-cluster</span><br><span class="line"></span><br><span class="line"><span class="comment"># Kind在Docker容器中运行K8s节点</span></span><br><span class="line">docker ps</span><br><span class="line"><span class="comment"># 输出：</span></span><br><span class="line">CONTAINER ID   IMAGE                  NAMES</span><br><span class="line">1a2b3c4d5e6f   kindest/node:v1.27.3   my-cluster-control-plane</span><br></pre></td></tr></table></figure>

<h4 id="生产环境部署"><a href="#生产环境部署" class="headerlink" title="生产环境部署"></a>生产环境部署</h4><p><strong>kubeadm（官方工具）</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Master节点初始化</span></span><br><span class="line"><span class="built_in">sudo</span> kubeadm init --pod-network-cidr=10.244.0.0/16</span><br><span class="line"></span><br><span class="line"><span class="comment"># Worker节点加入</span></span><br><span class="line"><span class="built_in">sudo</span> kubeadm <span class="built_in">join</span> 192.168.1.100:6443 --token &lt;token&gt; --discovery-token-ca-cert-hash &lt;<span class="built_in">hash</span>&gt;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="5-Pod调度到物理节点的完整机制"><a href="#5-Pod调度到物理节点的完整机制" class="headerlink" title="5. Pod调度到物理节点的完整机制"></a>5. Pod调度到物理节点的完整机制</h2><h3 id="5-1-Kubernetes集群的物理架构"><a href="#5-1-Kubernetes集群的物理架构" class="headerlink" title="5.1 Kubernetes集群的物理架构"></a>5.1 Kubernetes集群的物理架构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Kubernetes集群</span><br><span class="line">├── 控制平面节点 (Master Nodes)</span><br><span class="line">│   ├── kube-apiserver</span><br><span class="line">│   ├── etcd</span><br><span class="line">│   ├── kube-scheduler  ← 负责Pod调度</span><br><span class="line">│   └── kube-controller-manager</span><br><span class="line">└── 工作节点 (Worker Nodes)</span><br><span class="line">    ├── 物理机1 (kubelet + 容器运行时)</span><br><span class="line">    ├── 物理机2 (kubelet + 容器运行时)</span><br><span class="line">    ├── 虚拟机1 (kubelet + 容器运行时)</span><br><span class="line">    └── 虚拟机2 (kubelet + 容器运行时)</span><br></pre></td></tr></table></figure>

<h3 id="5-2-Pod调度的完整流程"><a href="#5-2-Pod调度的完整流程" class="headerlink" title="5.2 Pod调度的完整流程"></a>5.2 Pod调度的完整流程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">用户创建Pod</span><br><span class="line">    ↓</span><br><span class="line">API Server接收请求</span><br><span class="line">    ↓</span><br><span class="line">Scheduler分析资源需求</span><br><span class="line">    ↓</span><br><span class="line">筛选可用节点</span><br><span class="line">    ↓</span><br><span class="line">评分排序</span><br><span class="line">    ↓</span><br><span class="line">选择最佳节点</span><br><span class="line">    ↓</span><br><span class="line">kubelet在目标节点创建容器</span><br></pre></td></tr></table></figure>

<h3 id="5-3-实际调度示例"><a href="#5-3-实际调度示例" class="headerlink" title="5.3 实际调度示例"></a>5.3 实际调度示例</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建Pod后查看调度结果</span></span><br><span class="line">kubectl get pods -o wide</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出示例：</span></span><br><span class="line">NAME          READY   STATUS    RESTARTS   AGE   IP           NODE</span><br><span class="line">my-raft-pod   1/1     Running   0          30s   10.244.2.15  worker-node-2</span><br></pre></td></tr></table></figure>

<p>可以看到Pod被调度到了<code>worker-node-2</code>这台实际的机器上！</p>
<h3 id="5-4-节点资源管理"><a href="#5-4-节点资源管理" class="headerlink" title="5.4 节点资源管理"></a>5.4 节点资源管理</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看节点详细信息</span></span><br><span class="line">kubectl describe node worker-node-2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出示例：</span></span><br><span class="line">Addresses:</span><br><span class="line">  InternalIP:  192.168.1.102  ← 实际物理机IP</span><br><span class="line">Capacity:</span><br><span class="line">  cpu:                4      ← 4核CPU</span><br><span class="line">  memory:             8Gi    ← 8GB内存</span><br><span class="line">Allocated resources:</span><br><span class="line">  cpu                1500m (39%) </span><br><span class="line">  memory             3Gi (40%)</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="6-Pod创建和管理的黑箱揭秘"><a href="#6-Pod创建和管理的黑箱揭秘" class="headerlink" title="6. Pod创建和管理的黑箱揭秘"></a>6. Pod创建和管理的黑箱揭秘</h2><h3 id="6-1-Pod创建的几种方式"><a href="#6-1-Pod创建的几种方式" class="headerlink" title="6.1 Pod创建的几种方式"></a>6.1 Pod创建的几种方式</h3><h4 id="命令行创建"><a href="#命令行创建" class="headerlink" title="命令行创建"></a>命令行创建</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接创建Pod</span></span><br><span class="line">kubectl run my-pod --image=nginx --restart=Never</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过YAML文件创建</span></span><br><span class="line">kubectl apply -f pod.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建Job</span></span><br><span class="line">kubectl create job my-job --image=busybox -- <span class="built_in">echo</span> <span class="string">&quot;Hello World&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="程序化创建（应用内部创建Pod）"><a href="#程序化创建（应用内部创建Pod）" class="headerlink" title="程序化创建（应用内部创建Pod）"></a>程序化创建（应用内部创建Pod）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python K8s客户端</span></span><br><span class="line"><span class="keyword">from</span> kubernetes <span class="keyword">import</span> client, config</span><br><span class="line"></span><br><span class="line">config.load_incluster_config()</span><br><span class="line">v1 = client.CoreV1Api()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建Pod</span></span><br><span class="line">response = v1.create_namespaced_pod(</span><br><span class="line">    namespace=<span class="string">&quot;default&quot;</span>,</span><br><span class="line">    body=pod_manifest</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Pod created: <span class="subst">&#123;response.metadata.name&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="6-2-如何”拿到”Pod：获取Pod信息的方法"><a href="#6-2-如何”拿到”Pod：获取Pod信息的方法" class="headerlink" title="6.2 如何”拿到”Pod：获取Pod信息的方法"></a>6.2 如何”拿到”Pod：获取Pod信息的方法</h3><h4 id="通过名称直接获取"><a href="#通过名称直接获取" class="headerlink" title="通过名称直接获取"></a>通过名称直接获取</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取特定Pod</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    pod = v1.read_namespaced_pod(</span><br><span class="line">        name=<span class="string">&quot;my-dynamic-pod&quot;</span>,</span><br><span class="line">        namespace=<span class="string">&quot;default&quot;</span></span><br><span class="line">    )</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Pod状态: <span class="subst">&#123;pod.status.phase&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Pod IP: <span class="subst">&#123;pod.status.pod_ip&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> client.exceptions.ApiException <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Pod不存在: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="通过标签选择器获取"><a href="#通过标签选择器获取" class="headerlink" title="通过标签选择器获取"></a>通过标签选择器获取</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取带有特定标签的所有Pod</span></span><br><span class="line">pods = v1.list_namespaced_pod(</span><br><span class="line">    namespace=<span class="string">&quot;default&quot;</span>,</span><br><span class="line">    label_selector=<span class="string">&quot;app=my-app,job-type=backup&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> pod <span class="keyword">in</span> pods.items:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;找到Pod: <span class="subst">&#123;pod.metadata.name&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;状态: <span class="subst">&#123;pod.status.phase&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="6-3-以Raft-KV项目为例的完整流程"><a href="#6-3-以Raft-KV项目为例的完整流程" class="headerlink" title="6.3 以Raft KV项目为例的完整流程"></a>6.3 以Raft KV项目为例的完整流程</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在KvServer中创建备份任务</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">KvServer</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">scheduleBackup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::string jobName = <span class="string">&quot;raft-backup-&quot;</span> + std::<span class="built_in">to_string</span>(m_me) + <span class="string">&quot;-&quot;</span> + <span class="built_in">getCurrentTimestamp</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 创建Job的YAML配置</span></span><br><span class="line">        std::string jobYaml = <span class="built_in">createBackupJobYaml</span>(jobName, m_me);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 提交到K8s</span></span><br><span class="line">        std::string jobId = <span class="built_in">submitJobToKubernetes</span>(jobYaml);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 保存Job信息，用于后续跟踪</span></span><br><span class="line">        m_activeJobs[jobId] = &#123;</span><br><span class="line">            .name = jobName,</span><br><span class="line">            .type = <span class="string">&quot;backup&quot;</span>,</span><br><span class="line">            .startTime = std::<span class="built_in">time</span>(<span class="literal">nullptr</span>)</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 启动监控线程</span></span><br><span class="line">        <span class="function">std::thread <span class="title">monitorThread</span><span class="params">(&amp;KvServer::monitorJob, <span class="keyword">this</span>, jobId)</span></span>;</span><br><span class="line">        monitorThread.<span class="built_in">detach</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="7-应用内部创建Pod的”套娃”现象"><a href="#7-应用内部创建Pod的”套娃”现象" class="headerlink" title="7. 应用内部创建Pod的”套娃”现象"></a>7. 应用内部创建Pod的”套娃”现象</h2><h3 id="7-1-典型场景分析"><a href="#7-1-典型场景分析" class="headerlink" title="7.1 典型场景分析"></a>7.1 典型场景分析</h3><h4 id="CI-CD平台（如Jenkins、GitLab-CI）"><a href="#CI-CD平台（如Jenkins、GitLab-CI）" class="headerlink" title="CI&#x2F;CD平台（如Jenkins、GitLab CI）"></a>CI&#x2F;CD平台（如Jenkins、GitLab CI）</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Jenkins Master运行在K8s中</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">jenkins-master</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">jenkins</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">jenkins/jenkins:lts</span></span><br></pre></td></tr></table></figure>

<p>当有构建任务时，Jenkins会动态创建Pod来执行具体的构建工作：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Jenkins动态创建的构建Pod</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">build-job-12345</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">builder</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">maven:3.8-openjdk-11</span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">&quot;mvn&quot;</span>, <span class="string">&quot;clean&quot;</span>, <span class="string">&quot;package&quot;</span>]</span><br><span class="line">  <span class="attr">restartPolicy:</span> <span class="string">Never</span></span><br></pre></td></tr></table></figure>

<h3 id="7-2-为什么要这样设计？"><a href="#7-2-为什么要这样设计？" class="headerlink" title="7.2 为什么要这样设计？"></a>7.2 为什么要这样设计？</h3><h4 id="资源隔离"><a href="#资源隔离" class="headerlink" title="资源隔离"></a>资源隔离</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">主应用Pod (常驻):</span><br><span class="line">- 内存: 512Mi</span><br><span class="line">- CPU: 0.5 core</span><br><span class="line">- 职责: 调度、监控、API服务</span><br><span class="line"></span><br><span class="line">任务执行Pod (临时):</span><br><span class="line">- 内存: 4Gi</span><br><span class="line">- CPU: 2 cores  </span><br><span class="line">- 职责: 执行具体的计算任务</span><br></pre></td></tr></table></figure>

<h4 id="故障隔离"><a href="#故障隔离" class="headerlink" title="故障隔离"></a>故障隔离</h4><ul>
<li>主应用崩溃 ≠ 所有任务失败</li>
<li>单个任务失败 ≠ 主应用受影响</li>
<li>任务可以独立重试、扩缩容</li>
</ul>
<h3 id="7-3-实际的调度示例"><a href="#7-3-实际的调度示例" class="headerlink" title="7.3 实际的调度示例"></a>7.3 实际的调度示例</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建Pod后查看调度结果</span></span><br><span class="line">kubectl get pods -o wide</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可能的输出：</span></span><br><span class="line">NAME                READY   STATUS    NODE</span><br><span class="line">raft-kv-cluster-0   1/1     Running   worker-node-1  <span class="comment"># 物理机1</span></span><br><span class="line">raft-kv-cluster-1   1/1     Running   worker-node-2  <span class="comment"># 物理机2</span></span><br><span class="line">raft-kv-cluster-2   1/1     Running   worker-node-3  <span class="comment"># 物理机3</span></span><br><span class="line">raft-kv-cluster-3   1/1     Running   worker-node-1  <span class="comment"># 物理机1</span></span><br><span class="line">raft-kv-cluster-4   1/1     Running   worker-node-2  <span class="comment"># 物理机2</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="8-Kubernetes运行进程的完整操作指南"><a href="#8-Kubernetes运行进程的完整操作指南" class="headerlink" title="8. Kubernetes运行进程的完整操作指南"></a>8. Kubernetes运行进程的完整操作指南</h2><h3 id="8-1-进程创建操作"><a href="#8-1-进程创建操作" class="headerlink" title="8.1 进程创建操作"></a>8.1 进程创建操作</h3><h4 id="直接创建Pod"><a href="#直接创建Pod" class="headerlink" title="直接创建Pod"></a>直接创建Pod</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 命令行创建</span></span><br><span class="line">kubectl run my-pod --image=nginx --restart=Never</span><br><span class="line"></span><br><span class="line"><span class="comment"># YAML文件创建</span></span><br><span class="line">kubectl apply -f pod.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># 交互式创建</span></span><br><span class="line">kubectl run debug-pod --image=busybox -it --<span class="built_in">rm</span> -- /bin/sh</span><br></pre></td></tr></table></figure>

<h4 id="通过工作负载创建"><a href="#通过工作负载创建" class="headerlink" title="通过工作负载创建"></a>通过工作负载创建</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建Deployment（管理多个Pod副本）</span></span><br><span class="line">kubectl create deployment my-app --image=my-app:v1.0 --replicas=3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建Job（一次性任务）</span></span><br><span class="line">kubectl create job backup-job --image=backup-tool -- /backup.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建CronJob（定时任务）</span></span><br><span class="line">kubectl create cronjob daily-backup --image=backup-tool --schedule=<span class="string">&quot;0 2 * * *&quot;</span> -- /backup.sh</span><br></pre></td></tr></table></figure>

<h3 id="8-2-进程查询操作"><a href="#8-2-进程查询操作" class="headerlink" title="8.2 进程查询操作"></a>8.2 进程查询操作</h3><h4 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看所有Pod</span></span><br><span class="line">kubectl get pods</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看特定命名空间的Pod</span></span><br><span class="line">kubectl get pods -n my-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># 详细信息查看</span></span><br><span class="line">kubectl get pods -o wide</span><br><span class="line">kubectl describe pod my-pod</span><br></pre></td></tr></table></figure>

<h4 id="标签和选择器查询"><a href="#标签和选择器查询" class="headerlink" title="标签和选择器查询"></a>标签和选择器查询</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 按标签查询</span></span><br><span class="line">kubectl get pods -l app=my-app</span><br><span class="line">kubectl get pods -l <span class="string">&#x27;environment in (prod,staging)&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 按字段选择器查询</span></span><br><span class="line">kubectl get pods --field-selector=status.phase=Running</span><br><span class="line">kubectl get pods --field-selector=spec.nodeName=worker-node-1</span><br></pre></td></tr></table></figure>

<h3 id="8-3-进程监控操作"><a href="#8-3-进程监控操作" class="headerlink" title="8.3 进程监控操作"></a>8.3 进程监控操作</h3><h4 id="状态监控"><a href="#状态监控" class="headerlink" title="状态监控"></a>状态监控</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 实时监控Pod状态变化</span></span><br><span class="line">kubectl get pods -w</span><br><span class="line">kubectl get pods -l app=my-app -w</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看Pod事件</span></span><br><span class="line">kubectl get events --sort-by=.metadata.creationTimestamp</span><br></pre></td></tr></table></figure>

<h4 id="资源使用监控"><a href="#资源使用监控" class="headerlink" title="资源使用监控"></a>资源使用监控</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看资源使用情况（需要metrics-server）</span></span><br><span class="line">kubectl top pods</span><br><span class="line">kubectl top nodes</span><br></pre></td></tr></table></figure>

<h3 id="8-4-进程日志操作"><a href="#8-4-进程日志操作" class="headerlink" title="8.4 进程日志操作"></a>8.4 进程日志操作</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看Pod日志</span></span><br><span class="line">kubectl logs my-pod</span><br><span class="line"></span><br><span class="line"><span class="comment"># 实时跟踪日志</span></span><br><span class="line">kubectl logs -f my-pod</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看最近的日志</span></span><br><span class="line">kubectl logs my-pod --<span class="built_in">tail</span>=100</span><br><span class="line">kubectl logs my-pod --since=1h</span><br></pre></td></tr></table></figure>

<h3 id="8-5-进程交互操作"><a href="#8-5-进程交互操作" class="headerlink" title="8.5 进程交互操作"></a>8.5 进程交互操作</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在运行的Pod中执行命令</span></span><br><span class="line">kubectl <span class="built_in">exec</span> my-pod -- <span class="built_in">ls</span> /app</span><br><span class="line"></span><br><span class="line"><span class="comment"># 交互式进入容器</span></span><br><span class="line">kubectl <span class="built_in">exec</span> -it my-pod -- /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 端口转发</span></span><br><span class="line">kubectl port-forward my-pod 8080:80</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="9-Pod容器数量的控制机制"><a href="#9-Pod容器数量的控制机制" class="headerlink" title="9. Pod容器数量的控制机制"></a>9. Pod容器数量的控制机制</h2><h3 id="9-1-单容器Pod（最常见，90-的场景）"><a href="#9-1-单容器Pod（最常见，90-的场景）" class="headerlink" title="9.1 单容器Pod（最常见，90%+的场景）"></a>9.1 单容器Pod（最常见，90%+的场景）</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">simple-web-app</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">web-server</span>    <span class="comment"># 只有一个容器</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.20</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure>

<p><strong>特点</strong>：</p>
<ul>
<li>一个Pod &#x3D; 一个应用容器 + 一个pause容器（基础设施）</li>
<li>这是最简单、最常用的模式</li>
<li>大多数微服务都采用这种模式</li>
</ul>
<h3 id="9-2-多容器Pod（特殊场景，"><a href="#9-2-多容器Pod（特殊场景，" class="headerlink" title="9.2 多容器Pod（特殊场景，&lt;10%）"></a>9.2 多容器Pod（特殊场景，&lt;10%）</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">multi-container-app</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">web-app</span>           <span class="comment"># 主应用容器</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">my-web-app:v1.0</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">shared-logs</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/var/log</span></span><br><span class="line">  </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">log-collector</span>     <span class="comment"># 日志收集容器</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">fluentd:v1.14</span></span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">shared-logs</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/var/log</span></span><br><span class="line">  </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">metrics-exporter</span>  <span class="comment"># 监控指标容器</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">prometheus-exporter:v1.0</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">9090</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">shared-logs</span></span><br><span class="line">    <span class="attr">emptyDir:</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-3-实际验证容器数量"><a href="#9-3-实际验证容器数量" class="headerlink" title="9.3 实际验证容器数量"></a>9.3 实际验证容器数量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建单容器Pod</span></span><br><span class="line">kubectl run simple-app --image=nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看实际运行的容器</span></span><br><span class="line">docker ps | grep simple-app</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出示例：</span></span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  NAMES</span><br><span class="line">1a2b3c4d5e6f   nginx     <span class="string">&quot;nginx -g &#x27;daemon of…&quot;</span>   k8s_simple-app_simple-app_default_uuid</span><br><span class="line">2b3c4d5e6f7g   pause:3.6 <span class="string">&quot;/pause&quot;</span>                 k8s_POD_simple-app_default_uuid</span><br></pre></td></tr></table></figure>

<p><strong>解释</strong>：</p>
<ul>
<li><code>k8s_simple-app_...</code> 是你的应用容器</li>
<li><code>k8s_POD_...</code> 是pause容器（Pod基础设施）</li>
<li>所以”一个Pod”实际上总是至少有2个容器！</li>
</ul>
<h3 id="9-4-容器数量的设计决策"><a href="#9-4-容器数量的设计决策" class="headerlink" title="9.4 容器数量的设计决策"></a>9.4 容器数量的设计决策</h3><h4 id="何时使用单容器Pod"><a href="#何时使用单容器Pod" class="headerlink" title="何时使用单容器Pod"></a>何时使用单容器Pod</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 典型场景：独立的微服务</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">user-service</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">user-service:v2.0</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure>

<p><strong>适用场景</strong>：</p>
<ul>
<li>独立的微服务</li>
<li>无状态应用</li>
<li>简单的批处理任务</li>
<li>大部分Web应用</li>
</ul>
<h4 id="何时使用多容器Pod"><a href="#何时使用多容器Pod" class="headerlink" title="何时使用多容器Pod"></a>何时使用多容器Pod</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 典型场景：Web服务器 + SSL终止代理</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">web-app</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">my-app:v1.0</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br><span class="line">  </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">ssl-proxy</span>     <span class="comment"># SSL终止和反向代理</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.20</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">443</span></span><br></pre></td></tr></table></figure>

<p><strong>适用场景</strong>：</p>
<ul>
<li>需要边车模式（Sidecar Pattern）</li>
<li>日志收集和监控</li>
<li>代理和网关</li>
<li>数据同步和备份</li>
</ul>
<h3 id="9-5-以Raft-KV项目为例"><a href="#9-5-以Raft-KV项目为例" class="headerlink" title="9.5 以Raft KV项目为例"></a>9.5 以Raft KV项目为例</h3><h4 id="单容器Pod部署（推荐）"><a href="#单容器Pod部署（推荐）" class="headerlink" title="单容器Pod部署（推荐）"></a>单容器Pod部署（推荐）</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">raft-kv-node-0</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">raft-server</span>       <span class="comment"># 只有一个容器</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">raft-kv:latest</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">10000</span></span><br><span class="line">    <span class="attr">env:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">NODE_ID</span></span><br><span class="line">      <span class="attr">value:</span> <span class="string">&quot;0&quot;</span></span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">raft-data</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/data</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">raft-data</span></span><br><span class="line">    <span class="attr">persistentVolumeClaim:</span></span><br><span class="line">      <span class="attr">claimName:</span> <span class="string">raft-storage-0</span></span><br></pre></td></tr></table></figure>

<h4 id="多容器Pod部署（高级场景）"><a href="#多容器Pod部署（高级场景）" class="headerlink" title="多容器Pod部署（高级场景）"></a>多容器Pod部署（高级场景）</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">raft-kv-node-0-enhanced</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">raft-server</span>           <span class="comment"># 主应用容器</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">raft-kv:latest</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">10000</span></span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">raft-data</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/data</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">logs</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/var/log</span></span><br><span class="line">  </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">log-collector</span>         <span class="comment"># 日志收集容器</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">fluentd:v1.14</span></span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">logs</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/var/log</span></span><br><span class="line">  </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">metrics-exporter</span>      <span class="comment"># 监控指标容器</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">prometheus-exporter:v1.0</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">9090</span></span><br><span class="line">  </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">backup-agent</span>          <span class="comment"># 备份代理容器</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">backup-agent:v1.0</span></span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">raft-data</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/data</span></span><br><span class="line">      <span class="attr">readOnly:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="10-实践总结与最佳实践"><a href="#10-实践总结与最佳实践" class="headerlink" title="10. 实践总结与最佳实践"></a>10. 实践总结与最佳实践</h2><h3 id="10-1-核心概念总结"><a href="#10-1-核心概念总结" class="headerlink" title="10.1 核心概念总结"></a>10.1 核心概念总结</h3><h4 id="Kubernetes的本质"><a href="#Kubernetes的本质" class="headerlink" title="Kubernetes的本质"></a>Kubernetes的本质</h4><ul>
<li><strong>定位</strong>：分布式系统的基础设施抽象层</li>
<li><strong>作用</strong>：资源管理、调度、生命周期管理</li>
<li><strong>价值</strong>：自动化运维、标准化部署、服务治理</li>
</ul>
<h4 id="Pod的本质"><a href="#Pod的本质" class="headerlink" title="Pod的本质"></a>Pod的本质</h4><ul>
<li><strong>定义</strong>：Kubernetes的最小部署单元</li>
<li><strong>组成</strong>：一个或多个容器的集合</li>
<li><strong>特点</strong>：共享网络、存储、生命周期</li>
</ul>
<h4 id="调度机制"><a href="#调度机制" class="headerlink" title="调度机制"></a>调度机制</h4><ul>
<li><strong>过程</strong>：API Server → Scheduler → kubelet → 容器运行时</li>
<li><strong>结果</strong>：Pod运行在实际的物理机或虚拟机上</li>
<li><strong>控制</strong>：通过资源请求、节点选择器、亲和性等策略控制</li>
</ul>
<h3 id="10-2-设计原则和最佳实践"><a href="#10-2-设计原则和最佳实践" class="headerlink" title="10.2 设计原则和最佳实践"></a>10.2 设计原则和最佳实践</h3><h4 id="容器设计原则"><a href="#容器设计原则" class="headerlink" title="容器设计原则"></a>容器设计原则</h4><ol>
<li><strong>优先使用单容器Pod</strong>：简单、清晰、易管理</li>
<li><strong>多容器Pod的使用条件</strong>：<ul>
<li>容器间需要共享文件系统</li>
<li>容器间需要共享网络（localhost通信）</li>
<li>容器生命周期紧密耦合</li>
<li>容器需要同时调度到同一节点</li>
</ul>
</li>
</ol>
<h4 id="部署策略"><a href="#部署策略" class="headerlink" title="部署策略"></a>部署策略</h4><ol>
<li><p><strong>渐进式迁移</strong>：</p>
<ul>
<li>第一步：容器化应用</li>
<li>第二步：单Pod部署</li>
<li>第三步：添加K8s特性</li>
<li>第四步：完整的云原生架构</li>
</ul>
</li>
<li><p><strong>环境选择</strong>：</p>
<ul>
<li>开发环境：Minikube、Kind、Docker Desktop</li>
<li>测试环境：kubeadm集群</li>
<li>生产环境：云服务商托管或自建高可用集群</li>
</ul>
</li>
</ol>
<h3 id="10-3-常见问题和解决方案"><a href="#10-3-常见问题和解决方案" class="headerlink" title="10.3 常见问题和解决方案"></a>10.3 常见问题和解决方案</h3><h4 id="问题1：Pod调度失败"><a href="#问题1：Pod调度失败" class="headerlink" title="问题1：Pod调度失败"></a>问题1：Pod调度失败</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看调度失败原因</span></span><br><span class="line">kubectl describe pod my-pod</span><br><span class="line">kubectl get events --sort-by=.metadata.creationTimestamp</span><br></pre></td></tr></table></figure>

<p><strong>常见原因</strong>：</p>
<ul>
<li>资源不足</li>
<li>节点不可用</li>
<li>镜像拉取失败</li>
<li>存储卷挂载失败</li>
</ul>
<h4 id="问题2：容器启动失败"><a href="#问题2：容器启动失败" class="headerlink" title="问题2：容器启动失败"></a>问题2：容器启动失败</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看容器日志</span></span><br><span class="line">kubectl logs my-pod</span><br><span class="line">kubectl logs my-pod --previous</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入容器调试</span></span><br><span class="line">kubectl <span class="built_in">exec</span> -it my-pod -- /bin/bash</span><br></pre></td></tr></table></figure>

<h4 id="问题3：网络连通性问题"><a href="#问题3：网络连通性问题" class="headerlink" title="问题3：网络连通性问题"></a>问题3：网络连通性问题</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 测试Pod网络</span></span><br><span class="line">kubectl <span class="built_in">exec</span> my-pod -- ping other-pod-ip</span><br><span class="line">kubectl <span class="built_in">exec</span> my-pod -- nslookup my-service</span><br></pre></td></tr></table></figure>

<h3 id="10-4-监控和运维"><a href="#10-4-监控和运维" class="headerlink" title="10.4 监控和运维"></a>10.4 监控和运维</h3><h4 id="基础监控"><a href="#基础监控" class="headerlink" title="基础监控"></a>基础监控</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 资源使用监控</span></span><br><span class="line">kubectl top pods</span><br><span class="line">kubectl top nodes</span><br><span class="line"></span><br><span class="line"><span class="comment"># 状态监控</span></span><br><span class="line">kubectl get pods -w</span><br><span class="line">kubectl get events -w</span><br></pre></td></tr></table></figure>

<h4 id="日志管理"><a href="#日志管理" class="headerlink" title="日志管理"></a>日志管理</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 日志查看</span></span><br><span class="line">kubectl logs -f my-pod</span><br><span class="line">kubectl logs my-pod --since=1h --<span class="built_in">tail</span>=100</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多容器Pod的日志</span></span><br><span class="line">kubectl logs my-pod -c container-name</span><br></pre></td></tr></table></figure>

<h3 id="10-5-学习路径建议"><a href="#10-5-学习路径建议" class="headerlink" title="10.5 学习路径建议"></a>10.5 学习路径建议</h3><h4 id="初学者路径"><a href="#初学者路径" class="headerlink" title="初学者路径"></a>初学者路径</h4><ol>
<li><strong>理解概念</strong>：Pod、Service、Deployment的基本概念</li>
<li><strong>本地实践</strong>：使用Minikube搭建本地环境</li>
<li><strong>简单部署</strong>：部署单容器应用</li>
<li><strong>逐步深入</strong>：学习网络、存储、配置管理</li>
</ol>
<h4 id="进阶路径"><a href="#进阶路径" class="headerlink" title="进阶路径"></a>进阶路径</h4><ol>
<li><strong>多容器Pod</strong>：理解Sidecar模式</li>
<li><strong>服务网格</strong>：Istio、Linkerd等</li>
<li><strong>运维工具</strong>：Helm、Kustomize等</li>
<li><strong>监控告警</strong>：Prometheus、Grafana等</li>
</ol>
<h4 id="专家路径"><a href="#专家路径" class="headerlink" title="专家路径"></a>专家路径</h4><ol>
<li><strong>自定义控制器</strong>：Operator开发</li>
<li><strong>集群管理</strong>：高可用、灾备、升级</li>
<li><strong>性能优化</strong>：资源调优、网络优化</li>
<li><strong>安全加固</strong>：RBAC、网络策略、Pod安全策略</li>
</ol>
<hr>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol>
<li><strong>Kubernetes不是侵入性框架</strong>，而是基础设施抽象层</li>
<li><strong>Pod不是容器</strong>，而是容器的包装器和管理单元</li>
<li><strong>调度不是黑箱</strong>，而是可理解和可控制的资源分配过程</li>
<li><strong>复杂性是可管理的</strong>，通过渐进式学习和实践可以掌握</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/09/10/k8s%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/" data-id="cmfe5ab600000hgpv95ne7f5h" data-title="k8s深入理解" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/k8s/" rel="tag">k8s</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%B9%E5%99%A8%E7%BB%84/" rel="tag">容器组</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92/" rel="tag">容器编排</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2025/09/11/%E8%B7%AF%E5%BE%84%E6%80%BB%E5%92%8C/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          路径总和
        
      </div>
    </a>
  
  
    <a href="/2025/09/10/%E9%AA%8C%E8%AF%81%E4%BA%8C%E5%8F%89%E6%A0%91%E6%90%9C%E7%B4%A2/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">验证二叉搜索树</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CPU-CISC-RISC-%E6%8C%87%E4%BB%A4%E9%9B%86-%E6%9E%B6%E6%9E%84/" rel="tag">CPU, CISC, RISC, 指令集, 架构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CPU-%E6%8C%87%E4%BB%A4%E9%9B%86-%E6%B5%81%E6%B0%B4%E7%BA%BF-%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B/" rel="tag">CPU, 指令集, 流水线, 分支预测</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DFS/" rel="tag">DFS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LRU/" rel="tag">LRU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/golang/" rel="tag">golang</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k8s/" rel="tag">k8s</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8/" rel="tag">事件驱动</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" rel="tag">二叉树</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86-%E5%86%85%E5%AD%98%E6%B1%A0-malloc-%E6%8C%87%E9%92%88/" rel="tag">内存管理, 内存池, malloc, 指针</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%B7%E9%A2%98/" rel="tag">刷题</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%8F%E7%A8%8B/" rel="tag">协程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85-%E4%BA%92%E6%96%A5%E9%94%81-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8F-%E4%BF%A1%E5%8F%B7%E9%87%8F/" rel="tag">多线程, 生产者消费者, 互斥锁, 条件变量, 信号量</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E5%90%8C%E6%AD%A5-%E5%BC%82%E6%AD%A5-%E9%98%BB%E5%A1%9E-%E9%9D%9E%E9%98%BB%E5%A1%9E/" rel="tag">多线程,同步,异步,阻塞,非阻塞</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E8%BF%9B%E7%A8%8B-%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81/" rel="tag">多进程, 进程状态</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E8%BF%9B%E7%A8%8B-%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1/" rel="tag">多进程, 进程通信</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%B9%E5%99%A8%E7%BB%84/" rel="tag">容器组</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92/" rel="tag">容器编排</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/" rel="tag">工程实践</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BA%93%E6%96%87%E4%BB%B6/" rel="tag">库文件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BA%95%E5%B1%82%E7%BC%96%E8%AF%91/" rel="tag">底层编译</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/" rel="tag">归并排序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6-%E5%86%85%E6%A0%B8-IO/" rel="tag">文件描述符, 内核, IO</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E6%8A%A5/" rel="tag">日报</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A0%88%E5%8C%BA-%E5%A0%86%E5%8C%BA-%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8-%E6%A0%87%E5%87%86%E5%BA%93-%E9%93%BE%E8%A1%A8/" rel="tag">栈区, 堆区, 系统调用, 标准库, 链表</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/" rel="tag">算法总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E7%A8%8B-%E5%90%8C%E6%AD%A5-%E4%BA%92%E6%96%A5%E9%94%81-%E8%AF%BB%E5%86%99%E9%94%81/" rel="tag">线程, 同步, 互斥锁, 读写锁</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E7%A8%8B-%E8%BF%9B%E7%A8%8B/" rel="tag">线程, 进程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%88%E7%AB%AF-%E8%BF%9B%E7%A8%8B%E7%BB%84-%E4%BC%9A%E8%AF%9D-%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B/" rel="tag">终端, 进程组, 会话, 守护进程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B/" rel="tag">编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%8Clinux%EF%BC%8C%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98/" rel="tag">虚拟机，linux，虚拟内存</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/" rel="tag">语法基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%92%E5%BD%92/" rel="tag">递归</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/CPU-CISC-RISC-%E6%8C%87%E4%BB%A4%E9%9B%86-%E6%9E%B6%E6%9E%84/" style="font-size: 10px;">CPU, CISC, RISC, 指令集, 架构</a> <a href="/tags/CPU-%E6%8C%87%E4%BB%A4%E9%9B%86-%E6%B5%81%E6%B0%B4%E7%BA%BF-%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B/" style="font-size: 10px;">CPU, 指令集, 流水线, 分支预测</a> <a href="/tags/DFS/" style="font-size: 10px;">DFS</a> <a href="/tags/LRU/" style="font-size: 10px;">LRU</a> <a href="/tags/docker/" style="font-size: 10px;">docker</a> <a href="/tags/golang/" style="font-size: 10px;">golang</a> <a href="/tags/k8s/" style="font-size: 10px;">k8s</a> <a href="/tags/%E4%BA%8B%E4%BB%B6%E9%A9%B1%E5%8A%A8/" style="font-size: 10px;">事件驱动</a> <a href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91/" style="font-size: 10px;">二叉树</a> <a href="/tags/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86-%E5%86%85%E5%AD%98%E6%B1%A0-malloc-%E6%8C%87%E9%92%88/" style="font-size: 10px;">内存管理, 内存池, malloc, 指针</a> <a href="/tags/%E5%88%B7%E9%A2%98/" style="font-size: 20px;">刷题</a> <a href="/tags/%E5%8D%8F%E7%A8%8B/" style="font-size: 10px;">协程</a> <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85-%E4%BA%92%E6%96%A5%E9%94%81-%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8F-%E4%BF%A1%E5%8F%B7%E9%87%8F/" style="font-size: 10px;">多线程, 生产者消费者, 互斥锁, 条件变量, 信号量</a> <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E5%90%8C%E6%AD%A5-%E5%BC%82%E6%AD%A5-%E9%98%BB%E5%A1%9E-%E9%9D%9E%E9%98%BB%E5%A1%9E/" style="font-size: 10px;">多线程,同步,异步,阻塞,非阻塞</a> <a href="/tags/%E5%A4%9A%E8%BF%9B%E7%A8%8B-%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81/" style="font-size: 10px;">多进程, 进程状态</a> <a href="/tags/%E5%A4%9A%E8%BF%9B%E7%A8%8B-%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1/" style="font-size: 10px;">多进程, 进程通信</a> <a href="/tags/%E5%AE%B9%E5%99%A8%E7%BB%84/" style="font-size: 10px;">容器组</a> <a href="/tags/%E5%AE%B9%E5%99%A8%E7%BC%96%E6%8E%92/" style="font-size: 10px;">容器编排</a> <a href="/tags/%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5/" style="font-size: 10px;">工程实践</a> <a href="/tags/%E5%BA%93%E6%96%87%E4%BB%B6/" style="font-size: 10px;">库文件</a> <a href="/tags/%E5%BA%95%E5%B1%82%E7%BC%96%E8%AF%91/" style="font-size: 10px;">底层编译</a> <a href="/tags/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F/" style="font-size: 10px;">归并排序</a> <a href="/tags/%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6-%E5%86%85%E6%A0%B8-IO/" style="font-size: 10px;">文件描述符, 内核, IO</a> <a href="/tags/%E6%97%A5%E6%8A%A5/" style="font-size: 10px;">日报</a> <a href="/tags/%E6%A0%88%E5%8C%BA-%E5%A0%86%E5%8C%BA-%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8-%E6%A0%87%E5%87%86%E5%BA%93-%E9%93%BE%E8%A1%A8/" style="font-size: 10px;">栈区, 堆区, 系统调用, 标准库, 链表</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 20px;">算法</a> <a href="/tags/%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93/" style="font-size: 10px;">算法总结</a> <a href="/tags/%E7%BA%BF%E7%A8%8B-%E5%90%8C%E6%AD%A5-%E4%BA%92%E6%96%A5%E9%94%81-%E8%AF%BB%E5%86%99%E9%94%81/" style="font-size: 10px;">线程, 同步, 互斥锁, 读写锁</a> <a href="/tags/%E7%BA%BF%E7%A8%8B-%E8%BF%9B%E7%A8%8B/" style="font-size: 10px;">线程, 进程</a> <a href="/tags/%E7%BB%88%E7%AB%AF-%E8%BF%9B%E7%A8%8B%E7%BB%84-%E4%BC%9A%E8%AF%9D-%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B/" style="font-size: 10px;">终端, 进程组, 会话, 守护进程</a> <a href="/tags/%E7%BC%96%E7%A8%8B/" style="font-size: 10px;">编程</a> <a href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%8Clinux%EF%BC%8C%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98/" style="font-size: 10px;">虚拟机，linux，虚拟内存</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">设计模式</a> <a href="/tags/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/" style="font-size: 10px;">语法基础</a> <a href="/tags/%E9%80%92%E5%BD%92/" style="font-size: 15px;">递归</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/09/">九月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/08/">八月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">三月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">二月 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/01/">一月 2025</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/09/11/%E8%B7%AF%E5%BE%84%E6%80%BB%E5%92%8C/">路径总和</a>
          </li>
        
          <li>
            <a href="/2025/09/10/k8s%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/">k8s深入理解</a>
          </li>
        
          <li>
            <a href="/2025/09/10/%E9%AA%8C%E8%AF%81%E4%BA%8C%E5%8F%89%E6%A0%91%E6%90%9C%E7%B4%A2/">验证二叉搜索树</a>
          </li>
        
          <li>
            <a href="/2025/09/09/go%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/">go的注意事项</a>
          </li>
        
          <li>
            <a href="/2025/09/09/LRU%E7%AE%97%E6%B3%95/">LRU算法</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 Fxp<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>